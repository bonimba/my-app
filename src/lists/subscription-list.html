<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../cards/channel-card.html">
<link rel="import" href="../data/subscriptions-data.html">

<dom-module id="subscription-list">
    <template>
        <style>
            :host {
                display: block;
                box-sizing: border-box;
            }
        </style>

        <template is="dom-if" if="[[signedIn]]">
            <iron-localstorage name="accessToken" value="{{accessToken}}"></iron-localstorage>
            <subscriptions-data
                    response="{{data}}"
                    access-token="[[accessToken]]"
            ></subscriptions-data>

            <iron-list items="[[data.items]]" as="item">
                <template>
                    <channel-card
                            channel-avatar="[[item.snippet.thumbnails.default.url]]"
                            channel-name="[[item.snippet.title]]"
                    ></channel-card>
                </template>
            </iron-list>
        </template>
        <template is="dom-if" if="[[!signedIn]]">
            <div><p>You need to log in to access this section</p></div>
        </template>


    </template>

    <script>

        Polymer({
            is: 'subscription-list',
            properties:{
                accessToken:{
                    type: String,
                    value: ''
                },
                signedIn:{
                    type: Boolean,
                    value: false
                }
            }
       });

    </script>

</dom-module>
