<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation-runner-behavior.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-from-right-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-right-animation.html">

<dom-module id="sort-button">
    <template>
        <style>
            :host {
                display: block;
                box-sizing: border-box;
            }

            .mini{
                position: relative;
                right: -15px;
                margin-bottom: 10px;
            }

        </style>
        <template is="dom-if" if="[[showList]]">
                <paper-fab mini class="mini" icon="sort-by-alpha" title="a-z" on-tap="sortBy"></paper-fab>
                <paper-fab mini class="mini" icon="thumb-up" title="likes" on-tap="sortBy"></paper-fab>
                <paper-fab mini class="mini" icon="thumb-down" title="dislikes" on-tap="sortBy"></paper-fab>
                <paper-fab mini class="mini" icon="chat" title="comments" on-tap="sortBy"></paper-fab>
                <!-- <paper-fab mini class="mini" icon="share" title="shares" on-tap="sortBy"></paper-fab> -->
                <paper-fab mini class="mini" icon="visibility" title="views" on-tap="sortBy"></paper-fab>
        </template>

        <paper-fab icon="tune" title="sort" on-tap="_showSortList"></paper-fab>

    </template>
    <script>
        Polymer({
            is: 'sort-button',

            behaviors: [
                Polymer.NeonAnimationRunnerBehavior],

            listeners: {
                'neon-animation-finish': '_onNeonAnimationFinish',
                'mousedown': 'hide',
                'mouseup': 'show'
            },

            properties: {
                showList: {
                    type: Boolean,
                    value: false,
                    notify: true
                },

                showFAB: {
                    type: Boolean,
                    value: true,
                    notify: true
                }
            },

            animationConfig: {
                value: function(){
                    return {
                        'entry': {
                            name: 'slide-from-right-animation',
                            node: this
                        },
                        'exit' : {
                            name: 'slide-right-animation',
                            node: this
                        }
                    };
                }
            },

            /*sortBy: function(type){
                this.domHost._sortBy(type);
            },*/



            sortBy: function(e){
                var type = e.target.$.icon._iconName;
                this.domHost._sortBy(type);
                this._showSortList();
            },

            _showSortList: function(){
                this.showList = !this.showList;
            },

            hide: function(){
                this.showList = false;
                this.showFAB = false;
                this.cancelAnimation();
                this.playAnimation('exit');
            },

            show: function(){
                this.showList = false;
                this.showFAB = true;
                this.style.display = 'block';
                this.cancelAnimation();
                this.playAnimation('entry');
            },

            _onNeonAnimationFinish: function(){
                if(!this.showFAB){
                    this.style.display = 'none';
                }
            }

        });
    </script>

</dom-module>